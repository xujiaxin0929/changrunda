<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<style>
			* {
				margin: 0;
				padding: 0;
				list-style: none;
			}
			
			.box {
				width: 560px;
				height: 300px;
				margin: 100px auto;
				border: 1px solid #ccc;
				position: relative;
			}
			
			ul {
				width: 100%;
				height: 100%;
				display: flex;
			}
			
			li {
				flex: 1;
				position: relative;
				/* perspective: 1000px; */
				transform-style: preserve-3d;
				/* transition: all 2s linear; */
			}
			
			span {
				position: absolute;
				width: 100%;
				height: 100%;
			}
			
			.bf:nth-child(1) {
				/* background-color: blue; */
				background-image: url(img/1.jpg);
				transform: translateZ(150px);
			}
			
			.bk:nth-child(2) {
				/* background-color: yellow; */
				background-image: url(img/3.jpg);
				transform: rotateX(180deg) translateZ(150px);
			}
			
			.top:nth-child(3) {
				/* background-color: pink; */
				background-image: url(img/2.jpg);
				transform: rotateX(90deg) translateZ(150px);
			}
			
			.bot:nth-child(4) {
				/* background-color: red; */
				background-image: url(img/4.jpg);
				transform: rotateX(-90deg) translateZ(150px);
			}
			
			a {
				width: 50px;
				height: 60px;
				display: block;
				text-align: center;
				line-height: 60px;
				font-size: 30px;
				color: #fff;
				text-decoration: none;
				background: rgba(0, 0, 0, .5);
				position: absolute;
				top: 50%;
				margin-top: -30px;
			}
			
			.right {
				right: 0;
			}
			
			li:nth-child(2) span {
				background-position: -112px 0;
			}
			
			li:nth-child(3) span {
				background-position: -224px 0;
			}
			
			li:nth-child(4) span {
				background-position: -336px 0;
			}
			
			li:nth-child(5) span {
				background-position: right 0;
			}
		</style>
	</head>

	<body>
		<div class="box">
			<ul>
				<li>
					<span class="bf"></span>
					<span class="bk"></span>
					<span class="top"></span>
					<span class="bot"></span>
				</li>

				<li>
					<span class="bf"></span>
					<span class="bk"></span>
					<span class="top"></span>
					<span class="bot"></span>
				</li>

				<li>
					<span class="bf"></span>
					<span class="bk"></span>
					<span class="top"></span>
					<span class="bot"></span>
				</li>

				<li>
					<span class="bf"></span>
					<span class="bk"></span>
					<span class="top"></span>
					<span class="bot"></span>
				</li>

				<li>
					<span class="bf"></span>
					<span class="bk"></span>
					<span class="top"></span>
					<span class="bot"></span>
				</li>

			</ul>

			<a href="#" class="left">
				< </a>
					<a href="#" class="right">></a>
		</div>

		<script>
			var left_a = document.querySelector(".left");
			var right_a = document.querySelector(".right");
			var li = document.querySelectorAll("li");

			//默认动画没有执行完
			var lock = true;

			var n = 0;
			//下一张图片
			right_a.onclick = function() {

				if(lock) {
					n--;
					for(var i = 0; i < li.length; i++) {
						li[i].style.transform = "rotateX(" + n * 90 + "deg)";

						li[i].style.transition = "all 1s " + 0.2 * i + "s linear";
					}
					lock = false;
				}

			}

			// 上一张图片

			left_a.onclick = function() {

				if(lock) {
					n++;
					for(var i = 0; i < li.length; i++) {
						li[i].style.transform = "rotateX(" + n * 90 + "deg)";

						li[i].style.transition = "all 1s " + 0.2 * i + "s linear";

					}
					lock = false;
				}

			}
			//监听最后一个li动画是否完成。
			var lis = document.querySelector('li:last-child');
			lis.addEventListener('webkitTransitionEnd', function() {

				//动画执行完成
				lock = true;
			});
		</script>
	</body>

</html>