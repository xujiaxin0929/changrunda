<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<input type="file" name="" id="" value="" />
		<script type="text/javascript">
		// 生活中的例子
		// 让某位同学读一本书
		// 1、找一本书
		// 2、找一位同学
		// 3、让这位同学按某种方式（可能是朗读也可能是唱出来）把书中的内容读出来
		// 	3.1、这位同学可能要先熟悉一下内容
		//  3.2、然后才能把书中的内容读出来

		// 读取文件内容
		// 1、选择一个文件
		// 1.1、★通过 input标签中 type类型是file的标签选择文件★
		// 1.2、可以通过拖拽的方式选择文件（例如QQ邮箱添加附件）

		var file = document.querySelector("input");
		// 当file类型的input标签发生变化的时候
		file.onchange = function(){
			// 通过 files 属性返回了一个FileList对象
			// 选择的文件就包含在FileList中
			// FileList是一个伪数组
			var fl  = this.files;
			console.log(fl);

			// 2、找某一个东西来读取文件
			// 提供了一个FileReader对象来做这件事情
			var reader = new FileReader();
			// FileReader 提供了一系列的方法来帮助我们读取文件
			console.log(reader);

			// 3、以读取文本文件的方式来读取文件
			// 提供的方法readAsText()
			reader.readAsText(fl[0]);

			// 3.1、读取文件不可能一下子就读完，要有一个过程
			// 如何处理这个过程？
			// 需要等reader完全读取完成后
			// 提供了一个 onload 事件
			reader.onload = function(){
				// 3.2、如何体现把文件的内容读出来了
				// 通过result属性体现
				var res = reader.result;
				console.log(res);

				// 一个小应用
				// 1、创建一个style标签
				var style = document.createElement("style");
				// 2、将文件中的内容放到style标签中
				style.innerText = res;
				// 3、将style标签放到head标签中
				var head = document.querySelector("head");
				head.appendChild(style);
			}
		}
		</script>
	</body>
</html>
