<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>视频播放器</title>
	<link rel="stylesheet" href="./css/font-awesome.css">
	<link rel="stylesheet" href="./css/player.css">
</head>
<body>
	<figure>
		<figcaption>视频播放器</figcaption>
		<div class="player">
			<video src="./video/1.mp4"></video>
			<div class="controls">
				<!-- 播放/暂停 -->
				<a href="javascript:;" class="switch fa fa-play"></a>
				<!-- 全屏 -->
				<a href="javascript:;" class="expand fa fa-expand"></a>
				<!-- 进度条 -->
				<div class="progress">
					<div class="line"></div>
					<div class="bar"></div>
				</div>
				<!-- 时间 -->
				<div class="timer">
					<span class="current">00:00:00</span> /
					<span class="total">00:00:00</span>
				</div>
				<!-- 声音 -->
			</div>
		</div>
	</figure>
	<script src="./js/jquery.min.js"></script>
	<script>

		// 1、视屏的初始化
		// oncanplay 事件
		// 视屏和音频加载时需要时间的

		var video = $("video")[0];

		video.oncanplay = function(){
			// 1.1、改变loading的状态
			video.style.display ="block";
			// 1.2、获取视频的总时长 duration 属性
			var duration = video.duration;
			console.log(duration);
			// 获取到的时间是秒
			// 1.3、对时间进行转换
			var h = Math.floor(duration / 3600);
			var m = Math.floor(duration % 3600 / 60);
			var s = Math.floor(duration % 60);

			console.log(h,m,s);

			h = h<10? "0"+h:h;
			m = m<10? "0"+m:m;
			s = s<10? "0"+s:s;
			// 1.4、转换后将时间放到total中
			$(".total").text(h+":"+m+":"+s);
		}
		// 2、播放按钮
		$(".switch").on("click",function(){
			// 2.1、切换按钮样式
			$(this).toggleClass("fa-pause fa-play");
			// 2.2 播放功能的实现
			console.log(video.paused);
			if(video.paused){
				video.play();
			}
			else{
				video.pause();
			}
		})
		// 3、进度条功能
		video.ontimeupdate=function(){
			// 3.1 获取当前的播放时间
			var time = video.currentTime;
			// 3.2 进度条换算
			var w = time / video.duration * 100;
			$(".line").width(w+"%");


			var h = Math.floor(time / 3600);
			var m = Math.floor(time % 3600 / 60);
			var s = Math.floor(time % 60);

			console.log(h,m,s);

			h = h<10? "0"+h:h;
			m = m<10? "0"+m:m;
			s = s<10? "0"+s:s;

			// 3.3、转换后将时间放到current中
			$(".current").text(h+":"+m+":"+s);
			console.log(w);
		}
		// 4、快进
		$(".bar").on("click",function(event){
			// 4.1、获取到位置
			var x = event.offsetX;
			// 4.2、计算宽度
			var width = x / $(this).width();
			// 4.3、转换成当前时间
			var current = video.duration * width;
			
			video.currentTime = current;
		})

		// 5、放大缩小

		$(".expand").on("click",function(){
			video.webkitRequestFullScreen();
		})
	</script>
</body>
</html>